<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="../Css/Form.css" />
    <script>
      $(document).ready(function () {
        $("RegisterForm").submit(function (e) {
          e.preventDefault();
          if (RegisterFormValid()) {
            RegisterUser();
          }
        });
      });
      function RegisterUser() {
        const userreg = {
          Id: $("#RegisterId").val(),
          Name: $("#RegisterName").val(),
          Email: $("#RegisterEmail").val(),
          password: $("#RegisterPassword").val(),
          Phone:$("RegisterPhone").val(),
        };
        const api = `https://localhost:7119/api/Games`;
        ajaxCall(
          "POST",
          api,
          JSON.stringify(user),
          RegisterUserSCB,
          RegisterUserECB
        );
        function RegisterUserSCB(status) {
          console.log(status);
          alert(response.message); //וידא
          $("#registerForm")[0].reset();
        }
        function RegisterUserECB(err) {}
        console.error(err);
        alert("There is a problem to register this user!");
      }
      function RegisterFormvalid() {
    var Id = $("#RegisterId").val();
    var name = $("#RegisterName").val();
    var email = $("#RegisterEmail").val();
    var phone = $("#RegisterPhone").val();
    var password = $("#RegisterPassword").val();

    // Regex patterns
    var IdRegex = /^\d{9}$/;
    var nameRegex = /^[a-zA-Z]+([ '-][a-zA-Z]+)*$/;
    var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    var phoneRegex = /^05\d-\d{7}$/;
    var passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;

    
    if (!IdRegex.test(Id)) {
        swal.fire({
            icon: "error",
            title: "Invalid ID-cant contain letters!",
        });
        return;
    }

   
    if (!nameRegex.test(name)) {
        swal.fire({
            icon: "error",
            title: "Invalid name - can't contain numbers or special characters!",
        });
        return;
    }

   
    if (!emailRegex.test(email)) {
        swal.fire({
            icon: "error",
            title: "Invalid email!",
        });
        return;
    }

    
    if (!phoneRegex.test(phone)) {
        swal.fire({
            icon: "error",
            title: "Invalid phone number!",
        });
        return;
    }

   
    if (!passwordRegex.test(password)) {
        swal.fire({
            icon: "error",
            title: "Invalid password - must contain one uppercase, one digit, and be at least 8 characters!",
        });
        return;
    }

   
    swal.fire({
        icon: "success",
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
        title: "Login successful!",
        text: "Redirecting to the main page...",
        timer: 2000, 
        showConfirmButton: false
    }).then(() => {
        // הפניה לדף הראשי
        window.location.href = "index.html";
=======
        title: "Form submitted successfully!",
>>>>>>> parent of a657769 (תיקונים עם שינויים קישורים)
=======
        title: "Form submitted successfully!",
>>>>>>> parent of a657769 (תיקונים עם שינויים קישורים)
=======
        title: "Form submitted successfully!",
>>>>>>> parent of a657769 (תיקונים עם שינויים קישורים)
    });
}

    </script>
  </head>
  <body>
    <div class="form-container">
      <h1>Register</h1>
      <form id="registrationForm">
        <label for="Id">ID</label>
        <input id="RegisterId" type="text" placeholder="Enter your ID">
        <label for="name">Name</label>
          <input id="RegisterName" type="text" placeholder="Enter your name">
        

          <label for="email">Email</label>
          <input id="RegisterEmail" type="email" placeholder="Enter your email">
    

          <label for="phone">Phone</label>
          <input id="RegisterPhone" type="text" placeholder="Enter your phone (e.g., 050-1234567)">

          

          <label for="password">Password</label>
          <input id="RegisterPassword" type="password" placeholder="Enter a strong password">
         

          <button type="button" onclick="RegisterFormvalid()">Register</button>
      </form>
  </body>
</html>
